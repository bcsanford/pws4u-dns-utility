<!-- templates/admin.html -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard - PWS4U DNS Utility</title>
</head>
<body>
    <h1>Admin Dashboard</h1>
    <p><a href="{{ url_for('main.dashboard') }}">‚Üê Back to Dashboard</a></p>
    <table border="1" cellpadding="6">
        <thead>
            <tr>
                <th>Username</th>
                <th>Role</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for user in users %}
            <tr>
                <td>{{ user.username }}</td>
                <td>{{ "Admin" if user.is_admin else "User" }}</td>
                <td>
                    {% if user.id != current_user.id %}
                        <!-- Delete -->
                        <form action="{{ url_for('admin.delete_user', user_id=user.id) }}" method="POST" style="display:inline;">
                            <button type="submit" onclick="return confirm('Delete user {{ user.username }}?')">Delete</button>
                        </form>

                        <!-- Reset Password -->
                        <form action="{{ url_for('admin.reset_password', user_id=user.id) }}" method="POST" style="display:inline;">
                            <input type="password" name="new_password" placeholder="New Password" required>
                            <button type="submit">Reset Password</button>
                        </form>

                        <!-- Change Role -->
                        <form action="{{ url_for('admin.set_role', user_id=user.id) }}" method="POST" style="display:inline;">
                            <select name="role">
                                <option value="user" {% if not user.is_admin %}selected{% endif %}>User</option>
                                <option value="admin" {% if user.is_admin %}selected{% endif %}>Admin</option>
                            </select>
                            <button type="submit">Set Role</button>
                        </form>
                    {% else %}
                        <em>(you)</em>
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</body>
</html>
